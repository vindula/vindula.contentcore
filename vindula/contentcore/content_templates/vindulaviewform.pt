<html metal:use-macro="here/main_template/macros/master">
	<head>
        <!-- Removendo a área de portlets -->
        <metal:block fill-slot="top_slot">
            <tal:dummy tal:define="disable_column_one python:request.set('disable_plone.leftcolumn',1);
                                   disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
        </metal:block>
                
		<metal:styleslot fill-slot="style_slot">
    		<link rel="stylesheet" href="" type="text/css" tal:attributes="href string:${view/static}/css/form_style.css">
		</metal:styleslot>
	</head>
	<body>
		<div metal:fill-slot="main">
		    <div tal:define="Batch python:modules['Products.CMFPlone'].Batch;
											b_size python:20;
											b_start python:0;
											b_start request/b_start | b_start;">
				<div id="interna-form" >
					<tal:define define="values python:view.get_FormValues();
										batch python:Batch(values, b_size, int(b_start))">
					<!-- Invertendo a lista dos valores do formulario -->					
					<span tal:define="revert python:values.reverse()"></span>
					    		
					<fieldset>
		            	<legend>Exportar registro</legend>
						<a alt="exportar registro" title="exportar registro"
						   tal:attributes="href string:${context/absolute_url|nothing}/export-form">Exportar registro existentes via csv</a>

					</fieldset>
					<fieldset>
		            	<legend>Relat&oacute;rio dos registro</legend>
						<a alt="exportar relatorio" title="exportar relatorio"
						   tal:attributes="href string:${context/absolute_url|nothing}/relatorio-form">Gerar relat&oacute;rio os registros existentes</a>

					</fieldset>
					<!--fieldset>
		            	<legend>Visão Quadro de Avisos</legend>
						<a alt="Quadro de Avisos" title="Quadro de Avisos"
						   tal:attributes="href string:${context/absolute_url|nothing}/myvindula-avisos-view">Ver Quadro de Avisos</a>

					</fieldset-->
					
					<fieldset>
		            	<legend>Listagem do registros</legend>
						<table width="100%">
							<tr tal:define="fields python:view.get_Form_fields()">
								<tal:rep repeat="campo fields|nothing">
									<th tal:condition="campo/flag_ativo|nothing"
										tal:content="campo/title|nothing" />	
								</tal:rep>
								<th width="10%">Editar Registro</th>
								<th width="10%">Excluir Registro</th>
							</tr>
							<tal:rep repeat="item batch">
								<tr tal:define="i repeat/item/even|nothing" 
									tal:attributes="class python: i and 'even' or 'odd'">
									<tal:def tal:define="fields python:view.get_Form_fields()">
										<tal:rep repeat="campo fields|nothing">
											<tal:cond condition="campo/flag_ativo|nothing">
												<tal:def tal:define="data python: item.find(fields=campo.name_field).one()">

													<td tal:define="tipo campo/type_fields|nothing;
																	valor data/value|nothing;
																	valor_blob data/value_blob|nothing;
																	id_campo data/id|nothing;"
														tal:content="structure python:view.geraHTMLContent(id_campo,tipo,valor)"></td>
													
												</tal:def>
											</tal:cond>
										</tal:rep>
									</tal:def>
									<td width="10%">
										<a tal:attributes="href python:context.absolute_url()+'?id_instance='+str(item[0].instance_id)"
											alt="Editar registro" title="Editar registro"
											tal:condition="python: view.canRequestPermission('cmf.ModifyPortalContent')">
											Editar</a>
									</td>
									<td width="10%">
										<a tal:attributes="href python:context.absolute_url()+'/excluir-registro-form'+'?id_instance='+str(item[0].instance_id)"
											alt="Excluir registro" title="Excluir registro"
											tal:condition="python: view.canRequestPermission('cmf.ReviewPortalContent')">
											Excluir</a>
									</td>
								</tr>
							</tal:rep>		
						</table>
						<tal:cond tal:condition="values">
							<div class="navigation-users" tal:define="batch python:Batch(values, b_size, int(b_start));">
								<div metal:use-macro="here/batch_macros/macros/navigation" />
							</div>
						</tal:cond>
					</fieldset>
					</tal:define>
				</div>
		    </div>
		</div>  
	</body>
</html>
