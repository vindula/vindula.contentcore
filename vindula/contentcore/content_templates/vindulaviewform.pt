<html metal:use-macro="here/main_template/macros/master">
	<head>
		<metal:styleslot fill-slot="style_slot">
    		<link rel="stylesheet" href="" type="text/css" tal:attributes="href string:${view/static}/form_style.css">
		</metal:styleslot>
	</head>
	<body>
		<div metal:fill-slot="content">
		    <div id="content" tal:define="form view/get_Form|python:{};
										  id_form form/id|nothing">
				<h1 tal:content="form/name_form|nothing">Titulo Formulario</h1>
				<p tal:content="form/description_form|nothing">Descrição do formulario</p>
				<div id="interna" >    		
		            <fieldset>
		            	<legend>Cadastrar novo registro</legend>
						
						<a alt="Adicionar novo registro" title="Adicionar novo registro"
						   tal:attributes="href string:load-form?forms_id=${id_form}">Adicionar novo registro</a>

					</fieldset>
					<fieldset>
		            	<legend>Listagems do registros</legend>
						<table width="100%">
							<tr tal:define="fields python:view.get_Form_fields(id_form)">
								<tal:rep repeat="campo fields|nothing">
									<th tal:condition="campo/flag_ativo|nothing"
										tal:content="campo/title|nothing" />	
								</tal:rep>
								<th width="20%">Editar Registro</th>
							</tr>
							<tal:rep repeat="item python:view.get_FormValues(id_form)">
								<tr>
									<tal:def tal:define="fields python:view.get_Form_fields(id_form)">
										<tal:rep repeat="campo fields|nothing">
											<tal:cond condition="campo/flag_ativo|nothing">
												<tal:def tal:define="data python: item.find(fields=campo.name_field).one()">

													<td tal:define="tipo campo/type_fields|nothing;
																	valor data/value|nothing;
																	valor_blob data/value_blob|nothing;
																	id_campo data/id|nothing;"
														tal:content="structure python:view.geraHTMLContent(id_campo,tipo,valor)"></td>
													
													
													
												</tal:def>
											</tal:cond>
											
										</tal:rep>
									</tal:def>
									<td width="20%">
										<a tal:attributes="href python:'load-form?forms_id='+str(id_form)+'&id_instance='+str(item[0].instance_id)"
											alt="Editar registro" title="Editar Ticket">
											Editar</a>
									</td>
								</tr>
							</tal:rep>		
						</table>
					
					</fieldset>
				</div>
		    </div>
		</div>  
	</body>
</html>